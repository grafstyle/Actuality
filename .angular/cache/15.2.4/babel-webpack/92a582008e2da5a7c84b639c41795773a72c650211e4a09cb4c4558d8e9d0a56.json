{
  "ast": null,
  "code": "import _asyncToGenerator from \"C:/Users/pineapple/Documents/Actuality/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { Likes } from 'src/app/controller/likes/likes';\nimport { Cookies } from 'src/app/cookies/cookies';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nexport let LikesComponent = /*#__PURE__*/(() => {\n  class LikesComponent {\n    constructor(router) {\n      this.router = router;\n      this.cant_likes = 0;\n      this.id_post = 0;\n      this.disliked = new EventEmitter();\n      this.touch_like = 0;\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const has_like = yield _this.hasLike();\n        if (has_like) _this.touch_like++;\n      })();\n    }\n    hasLike() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const like_id = (yield Likes.getOf(_this2.id_post, Cookies.getUserID()))[0]?.id;\n          if (like_id != undefined) return true;\n        } catch (err) {\n          console.log('Something went wrong when get like.');\n        }\n        return false;\n      })();\n    }\n    setLike() {\n      if (isNaN(Cookies.getUserID())) {\n        this.router.navigateByUrl('/login');\n        return;\n      }\n      this.touch_like++;\n      if (this.touch_like == 1) this.addLike();\n      if (this.touch_like == 2) {\n        this.touch_like = 0;\n        this.quitLike();\n      }\n    }\n    addLike() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const has_like = yield _this3.hasLike();\n          if (has_like == false) {\n            Likes.post({\n              id_user: Cookies.getUserID(),\n              id_post: _this3.id_post\n            });\n            _this3.cant_likes++;\n          } else _this3.setLike();\n        } catch (err) {\n          console.log('Something went wrong when add like.');\n        }\n      })();\n    }\n    quitLike() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const like_id = (yield Likes.getOf(_this4.id_post, Cookies.getUserID()))[0].id || 0;\n          yield Likes.delete(like_id);\n          _this4.cant_likes--;\n          _this4.disliked.emit(true);\n        } catch (err) {\n          console.log('Something went wrong when quit like.');\n        }\n      })();\n    }\n  }\n  LikesComponent.ɵfac = function LikesComponent_Factory(t) {\n    return new (t || LikesComponent)(i0.ɵɵdirectiveInject(i1.Router));\n  };\n  LikesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LikesComponent,\n    selectors: [[\"app-likes\"]],\n    inputs: {\n      cant_likes: \"cant_likes\",\n      id_post: \"id_post\"\n    },\n    outputs: {\n      disliked: \"disliked\"\n    },\n    decls: 7,\n    vars: 2,\n    consts: [[1, \"date_and_likes\"], [1, \"likes\"], [3, \"click\"], [1, \"material-symbols-outlined\", 3, \"ngClass\"]],\n    template: function LikesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n        i0.ɵɵlistener(\"click\", function LikesComponent_Template_button_click_2_listener() {\n          return ctx.setLike();\n        });\n        i0.ɵɵelementStart(3, \"span\", 3);\n        i0.ɵɵtext(4, \"favorite\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"p\");\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngClass\", ctx.touch_like == 1 ? \"liked\" : \"not_liked\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", ctx.cant_likes + (ctx.cant_likes == 1 ? \" like\" : \" likes\"), \" \");\n      }\n    },\n    dependencies: [i2.NgClass],\n    styles: [\".date_and_likes[_ngcontent-%COMP%]{display:flex;gap:5px;padding:15px 15px 5px}.not_liked[_ngcontent-%COMP%]{color:var(--contrast_dark)}.liked[_ngcontent-%COMP%]{color:var(--p_color)}.likes[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;width:100%}.likes[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:var(--txt_color)}\"]\n  });\n  return LikesComponent;\n})();",
  "map": null,
  "metadata": {},
  "sourceType": "module",
  "externalDependencies": []
}
