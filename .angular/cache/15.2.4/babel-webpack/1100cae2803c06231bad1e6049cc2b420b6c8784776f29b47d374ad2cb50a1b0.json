{
  "ast": null,
  "code": "import _asyncToGenerator from \"C:/Users/pineapple/Documents/Actuality/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Posts } from 'src/app/controller/posts/posts';\nimport { RefreshService } from 'src/app/tools/refresh-service/refresh-service';\nimport { Tools } from 'src/app/tools/tools';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/tools/refresh-service/refresh-service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../posts-components/likes/likes.component\";\nimport * as i5 from \"../../posts-components/comments/comments.component\";\nimport * as i6 from \"../../components/loader/loader.component\";\nimport * as i7 from \"../../posts-components/carrousel-media/carrousel-media.component\";\nfunction HomeForYouComponent_app_loader_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loader\");\n  }\n}\nfunction HomeForYouComponent_div_1_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 6);\n    i0.ɵɵtext(1, \"signal_disconnected\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeForYouComponent_div_1_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 6);\n    i0.ɵɵtext(1, \"public_off\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeForYouComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtemplate(1, HomeForYouComponent_div_1_span_1_Template, 2, 0, \"span\", 5);\n    i0.ɵɵtemplate(2, HomeForYouComponent_div_1_span_2_Template, 2, 0, \"span\", 5);\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.err == ctx_r1.ERR_GET_POSTS);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.err != ctx_r1.ERR_GET_POSTS);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.err);\n  }\n}\nfunction HomeForYouComponent_div_3_app_carrousel_media_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-carrousel-media\", 22, 23);\n    i0.ɵɵlistener(\"closed\", function HomeForYouComponent_div_3_app_carrousel_media_13_Template_app_carrousel_media_closed_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.open_media_carrousel = false);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cpost_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"media\", cpost_r5.post.images);\n  }\n}\nfunction HomeForYouComponent_div_3_div_14_div_1_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 29);\n  }\n  if (rf & 2) {\n    const img_or_vid_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"src\", img_or_vid_r14, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction HomeForYouComponent_div_3_div_14_div_1_video_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"video\", 30);\n    i0.ɵɵelement(1, \"source\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const img_or_vid_r14 = i0.ɵɵnextContext().$implicit;\n    const cpost_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵclassProp(\"not_play_video\", cpost_r5.post.images.length > 1);\n    i0.ɵɵproperty(\"autoplay\", cpost_r5.post.images.length == 1)(\"preload\", cpost_r5.post.images.length == 1 ? \"none\" : \"\")(\"muted\", \"muted\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", img_or_vid_r14, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction HomeForYouComponent_div_3_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, HomeForYouComponent_div_3_div_14_div_1_img_1_Template, 1, 1, \"img\", 27);\n    i0.ɵɵtemplate(2, HomeForYouComponent_div_3_div_14_div_1_video_2_Template, 2, 6, \"video\", 28);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const img_or_vid_r14 = ctx.$implicit;\n    const img_i_r15 = ctx.index;\n    const cpost_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵstyleProp(\"grid-row\", img_i_r15 == 0 && cpost_r5.post.images.length > 2 ? \"1/\" + cpost_r5.post.images.length : \"\");\n    i0.ɵɵclassProp(\"img_cont\", cpost_r5.post.images.length > 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !img_or_vid_r14.includes(\".mp4\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", img_or_vid_r14.includes(\".mp4\"));\n  }\n}\nfunction HomeForYouComponent_div_3_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵlistener(\"click\", function HomeForYouComponent_div_3_div_14_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const i_r6 = i0.ɵɵnextContext().index;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.openMediaCarrousel(i_r6, ctx_r22.carrousel_media));\n    });\n    i0.ɵɵtemplate(1, HomeForYouComponent_div_3_div_14_div_1_Template, 3, 6, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cpost_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵclassProp(\"media\", cpost_r5.post.images.length == 1)(\"only_vid_media\", cpost_r5.post.images.length == 1 && cpost_r5.post.images[0].includes(\".mp4\"))(\"media_mul\", cpost_r5.post.images.length > 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", cpost_r5.post.images);\n  }\n}\nconst _c0 = function (a0) {\n  return [a0];\n};\nfunction HomeForYouComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"div\", 9)(3, \"div\", 10);\n    i0.ɵɵelement(4, \"img\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 12)(6, \"p\", 13);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 14);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 15);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"div\", 16);\n    i0.ɵɵtemplate(13, HomeForYouComponent_div_3_app_carrousel_media_13_Template, 2, 1, \"app-carrousel-media\", 17);\n    i0.ɵɵtemplate(14, HomeForYouComponent_div_3_div_14_Template, 2, 7, \"div\", 18);\n    i0.ɵɵelementStart(15, \"div\", 19)(16, \"p\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(18, \"app-likes\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(19, \"app-comments\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cpost_r5 = ctx.$implicit;\n    const i_r6 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"src\", cpost_r5.user_of_post.image || ctx_r2.def_person_img, i0.ɵɵsanitizeUrl);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(14, _c0, \"/\" + cpost_r5.user_of_post.url_name));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(16, _c0, \"/\" + cpost_r5.user_of_post.url_name));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", cpost_r5.user_of_post.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(18, _c0, \"/\" + cpost_r5.user_of_post.url_name));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" @\", cpost_r5.user_of_post.url_name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(20, _c0, \"/\" + cpost_r5.user_of_post.url_name));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.tools.formatDate(cpost_r5.post.date_added), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", cpost_r5.post.images.length > 0 && ctx_r2.open_media_carrousel && ctx_r2.actual_media_carrousel == i_r6 && (cpost_r5.post.images.length > 1 || cpost_r5.post.images.length == 1 && !cpost_r5.post.images[0].includes(\".mp4\")));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", cpost_r5.post.images.length > 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(cpost_r5.post.title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id_post\", cpost_r5.post.id)(\"cant_likes\", cpost_r5.likes.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id_post\", cpost_r5.post.id);\n  }\n}\nexport let HomeForYouComponent = /*#__PURE__*/(() => {\n  class HomeForYouComponent {\n    constructor(refresh, cd) {\n      this.refresh = refresh;\n      this.cd = cd;\n      this.tools = new Tools();\n      this.err = '';\n      this.cposts = [];\n      this.def_person_img = '../../assets/person.svg';\n      this.show_loader = true;\n      this.open_media_carrousel = false;\n      this.actual_media_carrousel = 0;\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.getCompletePosts();\n        _this.refresh.getUpdate().subscribe({\n          next: function () {\n            var _ref = _asyncToGenerator(function* (subject) {\n              if (subject.text == RefreshService.REFRESH_POSTS) yield _this.getCompletePosts();\n            });\n            return function next(_x) {\n              return _ref.apply(this, arguments);\n            };\n          }()\n        });\n      })();\n    }\n    getCompletePosts() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          _this2.cposts = (yield Posts.getCPosts(yield Posts.getAll())).reverse();\n          if (_this2.cposts.length == 0) _this2.err = _this2.ERR_NO_POSTS;else _this2.err = '';\n        } catch (e) {\n          _this2.err = _this2.ERR_GET_POSTS;\n        }\n        _this2.show_loader = false;\n      })();\n    }\n    openMediaCarrousel(pos, carrousel) {\n      this.open_media_carrousel = true;\n      this.actual_media_carrousel = pos;\n      if (carrousel != undefined) carrousel.open();\n      this.cd.detectChanges();\n    }\n    get ERR_NO_POSTS() {\n      return HomeForYouComponent.ERR_NO_POSTS;\n    }\n    get ERR_GET_POSTS() {\n      return HomeForYouComponent.ERR_GET_POSTS;\n    }\n  }\n  HomeForYouComponent.ERR_NO_POSTS = 'The app dont has posts.';\n  HomeForYouComponent.ERR_GET_POSTS = 'Something went wrong when get the data.';\n  HomeForYouComponent.ɵfac = function HomeForYouComponent_Factory(t) {\n    return new (t || HomeForYouComponent)(i0.ɵɵdirectiveInject(i1.RefreshService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n  };\n  HomeForYouComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeForYouComponent,\n    selectors: [[\"app-home-for-you\"]],\n    decls: 4,\n    vars: 3,\n    consts: [[4, \"ngIf\"], [\"class\", \"error_posts err_cont\", 4, \"ngIf\"], [1, \"all_posts\", \"all_p_margin\"], [\"class\", \"post\", 4, \"ngFor\", \"ngForOf\"], [1, \"error_posts\", \"err_cont\"], [\"class\", \"material-symbols-outlined\", 4, \"ngIf\"], [1, \"material-symbols-outlined\"], [1, \"post\"], [1, \"all_content\"], [1, \"user\", \"ns\"], [1, \"img_cont\"], [\"alt\", \"\", 3, \"src\", \"routerLink\"], [1, \"names\"], [1, \"name\", 3, \"routerLink\"], [1, \"url_name\", 3, \"routerLink\"], [1, \"date\", 3, \"routerLink\"], [1, \"content\"], [3, \"media\", \"closed\", 4, \"ngIf\"], [\"class\", \"grid_media\", 3, \"media\", \"only_vid_media\", \"media_mul\", \"click\", 4, \"ngIf\"], [1, \"title\"], [3, \"id_post\", \"cant_likes\"], [3, \"id_post\"], [3, \"media\", \"closed\"], [\"carrousel_media\", \"\"], [1, \"grid_media\", 3, \"click\"], [\"class\", \"grid_elem\", 3, \"img_cont\", \"grid-row\", 4, \"ngFor\", \"ngForOf\"], [1, \"grid_elem\"], [\"alt\", \"\", 3, \"src\", 4, \"ngIf\"], [\"controls\", \"\", \"loop\", \"\", 3, \"not_play_video\", \"autoplay\", \"preload\", \"muted\", 4, \"ngIf\"], [\"alt\", \"\", 3, \"src\"], [\"controls\", \"\", \"loop\", \"\", 3, \"autoplay\", \"preload\", \"muted\"], [\"type\", \"video/mp4\", 3, \"src\"]],\n    template: function HomeForYouComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, HomeForYouComponent_app_loader_0_Template, 1, 0, \"app-loader\", 0);\n        i0.ɵɵtemplate(1, HomeForYouComponent_div_1_Template, 5, 3, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵtemplate(3, HomeForYouComponent_div_3_Template, 20, 22, \"div\", 3);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.show_loader);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.err);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.cposts);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.RouterLink, i4.LikesComponent, i5.CommentsComponent, i6.LoaderComponent, i7.CarrouselMediaComponent],\n    styles: [\".options[_ngcontent-%COMP%], .options[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:flex;width:100%}.options[_ngcontent-%COMP%]{font-size:14pt}.options[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{justify-content:center;text-decoration:none;color:var(--txt_color);transition:all .3s ease-out;padding:20px 0}.options[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:var(--p_color)}\"]\n  });\n  return HomeForYouComponent;\n})();",
  "map": null,
  "metadata": {},
  "sourceType": "module",
  "externalDependencies": []
}
