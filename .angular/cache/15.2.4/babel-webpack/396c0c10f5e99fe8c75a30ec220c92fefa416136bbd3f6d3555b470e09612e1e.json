{
  "ast": null,
  "code": "import _asyncToGenerator from \"C:/Users/pineapple/Documents/Actuality/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { Tools } from 'src/app/tools/tools';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../components/alert-component/alert-component.component\";\nconst _c0 = [\"add_img_cont\"];\nconst _c1 = [\"add_btn\"];\nfunction AddImagesInputComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15);\n    i0.ɵɵtext(2, \"Waiting for an image or video.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AddImagesInputComponent_div_8_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 20);\n  }\n  if (rf & 2) {\n    const img_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"src\", img_r5.url, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AddImagesInputComponent_div_8_video_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"video\", 21);\n    i0.ɵɵelement(1, \"source\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const img_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"muted\", \"muted\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", img_r5.url, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AddImagesInputComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, AddImagesInputComponent_div_8_img_1_Template, 1, 1, \"img\", 17);\n    i0.ɵɵtemplate(2, AddImagesInputComponent_div_8_video_2_Template, 2, 2, \"video\", 18);\n    i0.ɵɵelementStart(3, \"div\", 19);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const img_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !img_r5.url.includes(\"video/mp4\") || !img_r5.url.includes(\".mp4\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", img_r5.url.includes(\"video/mp4\") || img_r5.url.includes(\".mp4\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(img_r5.name.split(\".\")[0]);\n  }\n}\nfunction AddImagesInputComponent_app_alert_component_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-alert-component\", 23);\n    i0.ɵɵlistener(\"is_closed\", function AddImagesInputComponent_app_alert_component_19_Template_app_alert_component_is_closed_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.alert_error = \"\");\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"msg\", ctx_r4.alert_error);\n  }\n}\nconst _c2 = function (a0) {\n  return {\n    color: a0\n  };\n};\nconst _c3 = function (a0) {\n  return {\n    font_size: a0\n  };\n};\nexport let AddImagesInputComponent = /*#__PURE__*/(() => {\n  class AddImagesInputComponent {\n    constructor() {\n      this.imgs = [];\n      this.imgs_to_delete = [];\n      this.tools = new Tools();\n      this.imgs_in_cloud = [];\n      this.hover_color = '';\n      this.font_size = '';\n      this.hover_add_img = false;\n      this.imgsIsChanged = new EventEmitter();\n      this.alert_error = '';\n    }\n    ngAfterViewInit() {\n      this.setImgsOfCloud();\n    }\n    chooseImgModal(show) {\n      if (show) {\n        this.tools.showComponent(this.add_img_cont.nativeElement);\n        return;\n      }\n      this.tools.hideComponent(this.add_img_cont.nativeElement);\n    }\n    setImgsOfCloud() {\n      if (this.imgs_in_cloud != undefined) {\n        for (const image of this.imgs_in_cloud) {\n          const new_img = {};\n          new_img.url = image;\n          new_img.name = this.tools.getNameOfCloudinaryFile(image);\n          this.imgs.push(new_img);\n        }\n      }\n    }\n    changingImg(e, ...opts) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const elem = e.target;\n        const new_img = {};\n        const file = elem.files?.item(0);\n        if (!_this.tools.acceptSomeFileBy(file, opts)) {\n          _this.alert_error = 'This file not is supported.';\n          elem.value = '';\n          return;\n        } else _this.alert_error = '';\n        const url = yield _this.tools.getImage(file);\n        const name = file.name;\n        for (const img of _this.imgs_in_cloud) if (name == _this.tools.getNameOfCloudinaryFile(img)) {\n          _this.alert_error = 'Some image has the same name.';\n          _this.add_btn.nativeElement.value = '';\n          return;\n        }\n        if (_this.imgs.length < 3) {\n          new_img.file = file;\n          new_img.url = url;\n          new_img.name = name;\n          _this.imgs.push(new_img);\n          _this.imgs_in_cloud.push(new_img.url);\n          _this.imgsIsChanged.emit(_this.imgs_in_cloud);\n          return;\n        }\n        _this.alert_error = 'Sorry only accept three images and/or videos. :(';\n      })();\n    }\n    removeLastImage() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (_this2.imgs.length > 0) {\n          const lastImg = _this2.imgs[_this2.imgs.length - 1].url;\n          if (lastImg.includes('https://res.cloudinary.com')) _this2.imgs_to_delete.push(lastImg);\n        }\n        _this2.imgs.pop();\n        _this2.imgs_in_cloud.pop();\n        _this2.add_btn.nativeElement.value = '';\n        _this2.imgsIsChanged.emit(_this2.imgs_in_cloud);\n      })();\n    }\n  }\n  AddImagesInputComponent.ɵfac = function AddImagesInputComponent_Factory(t) {\n    return new (t || AddImagesInputComponent)();\n  };\n  AddImagesInputComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddImagesInputComponent,\n    selectors: [[\"app-add-images-input\"]],\n    viewQuery: function AddImagesInputComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.add_img_cont = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.add_btn = _t.first);\n      }\n    },\n    inputs: {\n      imgs_in_cloud: \"imgs_in_cloud\",\n      hover_color: \"hover_color\",\n      font_size: \"font_size\"\n    },\n    outputs: {\n      imgsIsChanged: \"imgsIsChanged\"\n    },\n    decls: 20,\n    vars: 9,\n    consts: [[1, \"add_img\", \"centered\", 3, \"ngStyle\", \"mouseover\", \"mouseleave\", \"click\"], [1, \"material-symbols-outlined\", 3, \"ngStyle\"], [\"ngModel\", \"\", 1, \"modal_container\", \"add_img_cont\"], [\"add_img_cont\", \"\"], [1, \"display\"], [\"class\", \"initial_img\", 4, \"ngIf\"], [1, \"all_imgs\", \"centered\"], [\"class\", \"show_imgs\", 4, \"ngFor\", \"ngForOf\"], [1, \"btns_cont\"], [1, \"add_btn\"], [\"type\", \"file\", \"accept\", \"image/jpeg, image/png, video/mp4\", \"id\", \"add_btn\", \"ngModel\", \"\", 3, \"change\"], [\"add_btn\", \"\"], [3, \"click\"], [3, \"msg\", \"is_closed\", 4, \"ngIf\"], [1, \"initial_img\"], [1, \"wait\"], [1, \"show_imgs\"], [\"alt\", \"\", 3, \"src\", 4, \"ngIf\"], [\"controls\", \"\", \"autoplay\", \"\", \"loop\", \"\", 3, \"muted\", 4, \"ngIf\"], [1, \"name\"], [\"alt\", \"\", 3, \"src\"], [\"controls\", \"\", \"autoplay\", \"\", \"loop\", \"\", 3, \"muted\"], [\"type\", \"video/mp4\", 3, \"src\"], [3, \"msg\", \"is_closed\"]],\n    template: function AddImagesInputComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"mouseover\", function AddImagesInputComponent_Template_button_mouseover_0_listener() {\n          return ctx.hover_add_img = true;\n        })(\"mouseleave\", function AddImagesInputComponent_Template_button_mouseleave_0_listener() {\n          return ctx.hover_add_img = false;\n        })(\"click\", function AddImagesInputComponent_Template_button_click_0_listener() {\n          return ctx.chooseImgModal(true);\n        });\n        i0.ɵɵelementStart(1, \"span\", 1);\n        i0.ɵɵtext(2, \"image\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(3, \"div\", 2, 3)(5, \"div\", 4);\n        i0.ɵɵtemplate(6, AddImagesInputComponent_div_6_Template, 3, 0, \"div\", 5);\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵtemplate(8, AddImagesInputComponent_div_8_Template, 5, 3, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 8)(10, \"button\", 9)(11, \"label\");\n        i0.ɵɵtext(12, \" Add \");\n        i0.ɵɵelementStart(13, \"input\", 10, 11);\n        i0.ɵɵlistener(\"change\", function AddImagesInputComponent_Template_input_change_13_listener($event) {\n          return ctx.changingImg($event, \"image/jpeg\", \"image/png\", \"video/mp4\");\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function AddImagesInputComponent_Template_button_click_15_listener() {\n          return ctx.removeLastImage();\n        });\n        i0.ɵɵtext(16, \"Delete last\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function AddImagesInputComponent_Template_button_click_17_listener() {\n          return ctx.chooseImgModal(false);\n        });\n        i0.ɵɵtext(18, \"Ok\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(19, AddImagesInputComponent_app_alert_component_19_Template, 1, 1, \"app-alert-component\", 13);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(5, _c2, ctx.hover_color != \"\" && ctx.hover_add_img ? ctx.hover_color : \"\"));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(7, _c3, ctx.font_size != \"\" ? ctx.font_size : \"\"));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.imgs.length == 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.imgs);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", ctx.alert_error != \"\");\n      }\n    },\n    dependencies: [i1.NgForOf, i1.NgIf, i1.NgStyle, i2.AlertComponentComponent],\n    styles: [\".display[_ngcontent-%COMP%]{border-radius:15px;padding:5px;background-color:var(--p_color);width:450px}.wait[_ngcontent-%COMP%]{padding:10px 0;width:100%;text-align:center}.all_imgs[_ngcontent-%COMP%]{flex-wrap:wrap;gap:3px}.show_imgs[_ngcontent-%COMP%]{text-align:center}.show_imgs[_ngcontent-%COMP%] > img[_ngcontent-%COMP%], .show_imgs[_ngcontent-%COMP%] > video[_ngcontent-%COMP%]{height:120px}.btns_cont[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:3px}.btns_cont[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:5px}.add_img[_ngcontent-%COMP%]{height:100%}.add_img[_ngcontent-%COMP%], .btns_cont[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{color:var(--txt_color);transition:all .3s ease-out}.add_img[_ngcontent-%COMP%]:hover, .btns_cont[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{color:var(--txt_s_color)}.add_btn[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}\"]\n  });\n  return AddImagesInputComponent;\n})();",
  "map": null,
  "metadata": {},
  "sourceType": "module",
  "externalDependencies": []
}
